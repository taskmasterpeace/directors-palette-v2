{
  "code_improvements": [
    {
      "id": "ci-001",
      "type": "code_improvements",
      "title": "Recipe Import/Export Functionality",
      "description": "Add JSON import and export capabilities for recipes, allowing users to backup, share, and transfer their custom recipes between accounts or installations.",
      "rationale": "The exact pattern exists in usePromptImportExport.ts for prompts - exports to JSON with version/timestamp, imports with validation and duplicate checking. Recipes are stored in recipe.store.ts with full CRUD but lack this backup/sharing capability.",
      "builds_upon": ["usePromptImportExport.ts pattern", "Recipe store CRUD operations", "Toast notification system"],
      "estimated_effort": "small",
      "affected_files": [
        "src/features/shot-creator/hooks/useRecipeImportExport.ts (new)",
        "src/features/shot-creator/components/recipe/RecipeBuilder.tsx",
        "src/features/shot-creator/types/recipe.types.ts"
      ],
      "existing_patterns": [
        "usePromptImportExport.ts - JSON blob export with version/date metadata",
        "Blob creation and download link pattern",
        "File input with JSON parsing and validation",
        "Toast notifications for success/failure feedback"
      ],
      "implementation_approach": "Create useRecipeImportExport.ts following the exact structure of usePromptImportExport.ts. Export creates JSON blob with version string, exportDate, and recipes array (sans userId). Import parses JSON, validates recipe structure against recipe.types.ts, checks for duplicate names, and uses addRecipe from useRecipeStore. Add Import/Export buttons to RecipeBuilder.tsx header similar to prompt library.",
      "status": "draft",
      "created_at": "2025-12-25T02:50:00.000Z"
    },
    {
      "id": "ci-002",
      "type": "code_improvements",
      "title": "Wildcard Import/Export Functionality",
      "description": "Add JSON import and export capabilities for wildcards, enabling users to backup their custom wildcards and share them with the community.",
      "rationale": "Same pattern as prompts exists in usePromptImportExport.ts. Wildcards in wildcard.store.ts have full CRUD (createWildCard, updateWildCard, deleteWildCard) but no import/export. Users cannot backup or share their wildcards.",
      "builds_upon": ["usePromptImportExport.ts pattern", "Wildcard store CRUD operations", "Toast notification system"],
      "estimated_effort": "small",
      "affected_files": [
        "src/features/wildcards/hooks/useWildcardImportExport.ts (new)",
        "src/features/wildcards/components/WildcardSidebar.tsx",
        "src/features/shot-creator/store/wildcard.store.ts"
      ],
      "existing_patterns": [
        "usePromptImportExport.ts - complete import/export flow",
        "Blob/download pattern for file export",
        "File validation with duplicate checking",
        "Toast feedback on operation completion"
      ],
      "implementation_approach": "Create useWildcardImportExport.ts mirroring usePromptImportExport.ts. Export serializes wildcards array with version and timestamp. Import validates structure (name, content, category, description), checks for name duplicates using getWildCardByName, and calls createWildCard. Add Import/Export buttons to WildcardSidebar.tsx header.",
      "status": "draft",
      "created_at": "2025-12-25T02:50:00.000Z"
    },
    {
      "id": "ci-003",
      "type": "code_improvements",
      "title": "Draft Autosave for Recipe Editor",
      "description": "Add localStorage-based draft autosave to the recipe editor dialog, preventing loss of work if the dialog is closed accidentally or browser crashes.",
      "rationale": "The useDraftAutosave.ts hook already implements this pattern for story-creator with 30-second interval saves, age-based expiry (24h), and snapshot comparison to avoid unnecessary writes. Recipe editing in RecipeBuilder.tsx dialog has no such protection.",
      "builds_upon": ["useDraftAutosave.ts pattern", "Recipe editor form state", "DraftRestorePrompt.tsx component"],
      "estimated_effort": "small",
      "affected_files": [
        "src/features/shot-creator/hooks/useRecipeDraftAutosave.ts (new)",
        "src/features/shot-creator/components/recipe/RecipeBuilder.tsx",
        "src/features/shot-creator/components/recipe/RecipeDraftRestorePrompt.tsx (new)"
      ],
      "existing_patterns": [
        "useDraftAutosave.ts - localStorage save with timeout debounce",
        "loadDraft(), clearDraft(), hasDraft() utility functions",
        "DraftRestorePrompt.tsx - UI for offering draft restoration",
        "Snapshot comparison to avoid redundant saves"
      ],
      "implementation_approach": "Create useRecipeDraftAutosave.ts based on useDraftAutosave.ts structure. Store recipe form state (name, description, stages, category) with timestamp. When recipe dialog opens, check for existing draft and prompt user to restore. Clear draft when recipe is successfully saved. Use AUTOSAVE_KEY = 'recipe-editor-draft' for localStorage.",
      "status": "draft",
      "created_at": "2025-12-25T02:50:00.000Z"
    },
    {
      "id": "ci-004",
      "type": "code_improvements",
      "title": "Search Functionality for Wildcard Sidebar",
      "description": "Add real-time search filtering to the wildcard sidebar, allowing users to quickly find wildcards by name, category, or content.",
      "rationale": "The usePromptFilters.ts hook implements search/filter for prompts with useMemo-based filtering. WildcardSidebar.tsx currently just lists all wildcards without search, becoming unwieldy as collection grows.",
      "builds_upon": ["usePromptFilters.ts pattern", "Wildcard store wildcards array", "Input component from shadcn/ui"],
      "estimated_effort": "trivial",
      "affected_files": [
        "src/features/wildcards/components/WildcardSidebar.tsx",
        "src/features/wildcards/hooks/useWildcardFilters.ts (new)"
      ],
      "existing_patterns": [
        "usePromptFilters.ts - useMemo filtering with searchQuery state",
        "Input component with Search icon (seen in ExpandedGallery.tsx)",
        "Store-based filtering approach"
      ],
      "implementation_approach": "Add useState for searchQuery in WildcardSidebar. Add Input component with Search icon above the wildcard list. Filter wildcards using useMemo: match searchQuery against wildcard.name, wildcard.category, and optionally wildcard.content (for finding wildcards containing specific terms). Follow the pattern from ExpandedGallery.tsx line 73-85 for filter logic.",
      "status": "draft",
      "created_at": "2025-12-25T02:50:00.000Z"
    },
    {
      "id": "ci-005",
      "type": "code_improvements",
      "title": "Recipe Search and Filter Bar",
      "description": "Add search functionality and improved filtering to the Recipe Builder, enabling users to quickly find recipes by name or description as their collection grows.",
      "rationale": "RecipeBuilder.tsx has category filter (selectedCategory state) but no text search. ExpandedGallery.tsx shows the pattern with search input + filter tabs. As users create more recipes, finding specific ones becomes difficult.",
      "builds_upon": ["ExpandedGallery.tsx search pattern", "usePromptFilters.ts filtering approach", "Recipe category filtering"],
      "estimated_effort": "small",
      "affected_files": [
        "src/features/shot-creator/components/recipe/RecipeBuilder.tsx",
        "src/features/shot-creator/hooks/useRecipeFilters.ts (new)"
      ],
      "existing_patterns": [
        "ExpandedGallery.tsx - search input with filterTab state and filteredImages",
        "usePromptFilters.ts - useMemo filtering against searchQuery",
        "RecipeBuilder already has selectedCategory state"
      ],
      "implementation_approach": "Create useRecipeFilters.ts hook that takes recipes array, searchQuery, and selectedCategory. Use useMemo to filter: first by category (existing), then by searchQuery matching name and description (case-insensitive). Add search Input above the recipe list in RecipeBuilder.tsx. Combine with existing category filter tabs for a unified search/filter bar.",
      "status": "draft",
      "created_at": "2025-12-25T02:50:00.000Z"
    }
  ]
}
