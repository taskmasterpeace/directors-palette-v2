{
  "task_description": "# User Prompts Organization System\n\nImplement the user_prompts table and UI for saving, organizing, and reusing prompts. Allow users to create folders, add tags, and quickly search their prompt library.\n\n## Rationale\nPower users create hundreds of prompts during a project. Without organization, they waste time recreating prompts or searching through history. This addresses the repetitive prompt work pain point shared across all competitors (pain-1-4, pain-3-4).\n\n## User Stories\n- As a storyboard artist, I want to save my best prompts so that I can reuse them for similar scenes\n- As a comic creator, I want to organize prompts by project so that I can quickly find the right prompt for each series\n\n## Acceptance Criteria\n- [ ] Users can save prompts with custom names and descriptions\n- [ ] Users can organize prompts into folders\n- [ ] Users can add tags to prompts for filtering\n- [ ] Quick search finds prompts by name, content, or tags\n- [ ] One-click loads saved prompt into Shot Creator\n",
  "scoped_services": ["main"],
  "files_to_modify": [
    "src/features/shot-creator/components/ShotCreator.tsx",
    "src/features/shot-creator/store/shot-creator.store.ts"
  ],
  "files_to_reference": [
    "supabase/migrations/20251216_community.sql",
    "src/app/api/community/route.ts",
    "src/lib/auth/api-auth.ts",
    "src/store/shot-production.store.ts"
  ],
  "patterns": {
    "database_migration": "Use RLS with auth.uid(), create indexes on foreign keys and search fields, follow naming YYYYMMDDHHMMSS_description.sql",
    "api_routes": "Use getAuthenticatedUser() from @/lib/auth/api-auth, return NextResponse.json with proper status codes, handle errors in try/catch",
    "zustand_stores": "Use create() from zustand with devtools and persist middleware, separate state and actions interfaces",
    "components": "Use 'use client' directive, TypeScript interfaces for props, Tailwind CSS for styling"
  },
  "existing_implementations": {
    "description": "Found community items system with similar patterns (tags, search, user-scoped data)",
    "relevant_files": [
      "supabase/migrations/20251216_community.sql",
      "src/app/api/community/route.ts",
      "src/app/api/community/library/route.ts"
    ]
  },
  "integration_points": {
    "shot_creator": {
      "component": "src/features/shot-creator/components/ShotCreator.tsx",
      "store": "src/features/shot-creator/store/shot-creator.store.ts",
      "prompt_field": "shotCreatorPrompt",
      "integration_method": "Add save button to Shot Creator UI and load prompt functionality"
    }
  },
  "created_at": "2025-12-25T18:20:28.153572"
}
