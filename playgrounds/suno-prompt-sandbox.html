<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Mix Sandbox - Suno Prompt Preview</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  :root {
    --bg: #0a0a0a;
    --card: #1a1a1a;
    --card-hover: #222222;
    --border: #2a2a2a;
    --text: #e5e5e5;
    --text-muted: #888888;
    --text-dim: #555555;
    --amber: #f59e0b;
    --amber-dim: rgba(245, 158, 11, 0.15);
    --amber-glow: rgba(245, 158, 11, 0.08);
    --red: #ef4444;
    --radius: 8px;
    --radius-sm: 6px;
  }

  body {
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: var(--bg);
    color: var(--text);
    line-height: 1.6;
    min-height: 100vh;
  }

  /* Header */
  .header {
    text-align: center;
    padding: 48px 24px 32px;
    border-bottom: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(245, 158, 11, 0.04) 0%, transparent 100%);
  }

  .header h1 {
    font-size: 2rem;
    font-weight: 700;
    letter-spacing: -0.03em;
    background: linear-gradient(135deg, var(--amber) 0%, #fbbf24 50%, #f59e0b 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 6px;
  }

  .header p {
    color: var(--text-muted);
    font-size: 0.925rem;
    font-weight: 400;
  }

  /* Layout */
  .container {
    max-width: 1400px;
    margin: 0 auto;
    padding: 32px 24px 64px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 32px;
    align-items: start;
  }

  @media (max-width: 900px) {
    .container {
      grid-template-columns: 1fr;
      padding: 20px 16px 48px;
      gap: 24px;
    }
  }

  /* Panels */
  .panel {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 12px;
    padding: 28px;
  }

  .panel-title {
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    color: var(--amber);
    margin-bottom: 24px;
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .panel-title::before {
    content: '';
    display: inline-block;
    width: 3px;
    height: 14px;
    background: var(--amber);
    border-radius: 2px;
  }

  /* Form Sections */
  .form-section {
    margin-bottom: 24px;
  }

  .form-section:last-child {
    margin-bottom: 0;
  }

  .form-label {
    font-size: 0.825rem;
    font-weight: 500;
    color: var(--text);
    margin-bottom: 10px;
    display: block;
  }

  .form-label .hint {
    color: var(--text-dim);
    font-weight: 400;
    font-size: 0.75rem;
    margin-left: 6px;
  }

  /* Chip Groups */
  .chip-group {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
  }

  .chip {
    padding: 6px 14px;
    border-radius: 20px;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text-muted);
    font-size: 0.8rem;
    font-family: 'Inter', sans-serif;
    font-weight: 450;
    cursor: pointer;
    transition: all 0.15s ease;
    user-select: none;
  }

  .chip:hover {
    border-color: #444;
    color: var(--text);
    background: rgba(255,255,255,0.03);
  }

  .chip.active {
    border-color: var(--amber);
    background: var(--amber-dim);
    color: var(--amber);
  }

  .chip.disabled {
    opacity: 0.35;
    cursor: not-allowed;
  }

  .chip.disabled:hover {
    border-color: var(--border);
    color: var(--text-muted);
    background: transparent;
  }

  /* Text Inputs */
  .text-input {
    width: 100%;
    padding: 10px 14px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    background: var(--bg);
    color: var(--text);
    font-family: 'Inter', sans-serif;
    font-size: 0.85rem;
    outline: none;
    transition: border-color 0.15s ease;
  }

  .text-input:focus {
    border-color: var(--amber);
    box-shadow: 0 0 0 3px var(--amber-glow);
  }

  .text-input::placeholder {
    color: var(--text-dim);
  }

  /* Tag Input */
  .tag-input-wrapper {
    display: flex;
    flex-wrap: wrap;
    gap: 6px;
    padding: 8px 10px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    background: var(--bg);
    min-height: 42px;
    cursor: text;
    transition: border-color 0.15s ease;
  }

  .tag-input-wrapper:focus-within {
    border-color: var(--amber);
    box-shadow: 0 0 0 3px var(--amber-glow);
  }

  .tag {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 10px;
    border-radius: 14px;
    background: var(--amber-dim);
    border: 1px solid rgba(245, 158, 11, 0.25);
    color: var(--amber);
    font-size: 0.78rem;
    font-weight: 500;
    white-space: nowrap;
  }

  .tag-remove {
    cursor: pointer;
    font-size: 0.9rem;
    line-height: 1;
    opacity: 0.6;
    transition: opacity 0.1s;
    margin-left: 2px;
  }

  .tag-remove:hover {
    opacity: 1;
  }

  .tag-input-field {
    border: none;
    outline: none;
    background: transparent;
    color: var(--text);
    font-family: 'Inter', sans-serif;
    font-size: 0.85rem;
    flex: 1;
    min-width: 100px;
    padding: 2px 4px;
  }

  .tag-input-field::placeholder {
    color: var(--text-dim);
  }

  /* Slider */
  .slider-container {
    padding: 4px 0;
  }

  .slider-labels {
    display: flex;
    justify-content: space-between;
    font-size: 0.72rem;
    color: var(--text-dim);
    margin-bottom: 10px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .slider-track-wrapper {
    position: relative;
    padding: 8px 0;
  }

  input[type="range"] {
    -webkit-appearance: none;
    appearance: none;
    width: 100%;
    height: 6px;
    border-radius: 3px;
    background: var(--border);
    outline: none;
    cursor: pointer;
  }

  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--amber);
    cursor: pointer;
    box-shadow: 0 0 8px rgba(245, 158, 11, 0.3);
    transition: box-shadow 0.15s ease;
  }

  input[type="range"]::-webkit-slider-thumb:hover {
    box-shadow: 0 0 14px rgba(245, 158, 11, 0.5);
  }

  input[type="range"]::-moz-range-thumb {
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: var(--amber);
    cursor: pointer;
    border: none;
    box-shadow: 0 0 8px rgba(245, 158, 11, 0.3);
  }

  .slider-value {
    text-align: center;
    font-size: 0.78rem;
    color: var(--amber);
    font-weight: 600;
    margin-top: 6px;
  }

  /* Output Boxes */
  .output-panel {
    position: sticky;
    top: 24px;
  }

  @media (max-width: 900px) {
    .output-panel {
      position: static;
    }
  }

  .output-box {
    margin-bottom: 20px;
    border-radius: var(--radius);
    border: 1px solid var(--border);
    border-left: 3px solid var(--amber);
    background: var(--bg);
    overflow: hidden;
  }

  .output-box:last-child {
    margin-bottom: 0;
  }

  .output-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    background: rgba(255,255,255,0.015);
  }

  .output-label {
    font-size: 0.78rem;
    font-weight: 600;
    color: var(--text-muted);
    text-transform: uppercase;
    letter-spacing: 0.06em;
  }

  .output-meta {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .char-count {
    font-size: 0.72rem;
    color: var(--text-dim);
    font-family: 'JetBrains Mono', monospace;
    font-weight: 400;
  }

  .char-count.warn {
    color: var(--red);
  }

  .copy-btn {
    padding: 4px 12px;
    border-radius: var(--radius-sm);
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text-muted);
    font-size: 0.72rem;
    font-family: 'Inter', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s ease;
    text-transform: uppercase;
    letter-spacing: 0.04em;
  }

  .copy-btn:hover {
    border-color: var(--amber);
    color: var(--amber);
    background: var(--amber-glow);
  }

  .copy-btn.copied {
    border-color: #22c55e;
    color: #22c55e;
    background: rgba(34, 197, 94, 0.08);
  }

  .output-text {
    padding: 16px;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.82rem;
    line-height: 1.7;
    color: var(--text);
    min-height: 56px;
    word-break: break-word;
  }

  .output-text.empty {
    color: var(--text-dim);
    font-style: italic;
    font-family: 'Inter', sans-serif;
  }

  /* Section Divider */
  .divider {
    height: 1px;
    background: var(--border);
    margin: 24px 0;
  }

  /* Scrollbar */
  ::-webkit-scrollbar { width: 6px; }
  ::-webkit-scrollbar-track { background: transparent; }
  ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
  ::-webkit-scrollbar-thumb:hover { background: #444; }

  /* Genre limit note */
  .limit-note {
    font-size: 0.72rem;
    color: var(--text-dim);
    margin-top: 8px;
    transition: color 0.15s;
  }

  .limit-note.at-limit {
    color: var(--amber);
  }
</style>
</head>
<body>

<div class="header">
  <h1>The Mix Sandbox</h1>
  <p>Build and preview your Suno prompts in real-time</p>
</div>

<div class="container">
  <!-- LEFT: Artist DNA Inputs -->
  <div class="panel">
    <div class="panel-title">Artist DNA</div>

    <!-- Genre Selector -->
    <div class="form-section">
      <label class="form-label">Genre <span class="hint">pick up to 3</span></label>
      <div class="chip-group" id="genre-chips"></div>
      <div class="limit-note" id="genre-limit">0 / 3 selected</div>
    </div>

    <!-- Subgenre -->
    <div class="form-section">
      <label class="form-label">Subgenres <span class="hint">comma-separated</span></label>
      <input type="text" class="text-input" id="subgenre-input" placeholder="e.g. Trap, Melodic Trap, Drill">
    </div>

    <div class="divider"></div>

    <!-- Production Preferences -->
    <div class="form-section">
      <label class="form-label">Production Preferences</label>
      <div class="chip-group" id="production-chips"></div>
    </div>

    <!-- Artist Influences -->
    <div class="form-section">
      <label class="form-label">Artist Influences <span class="hint">press Enter to add</span></label>
      <div class="tag-input-wrapper" id="influences-wrapper">
        <input type="text" class="tag-input-field" id="influences-input" placeholder="Type an artist name...">
      </div>
    </div>

    <div class="divider"></div>

    <!-- Melody Bias -->
    <div class="form-section">
      <label class="form-label">Melody Bias</label>
      <div class="slider-container">
        <div class="slider-labels">
          <span>Pure Rap</span>
          <span>Pure Singing</span>
        </div>
        <div class="slider-track-wrapper">
          <input type="range" id="melody-slider" min="0" max="100" value="45">
        </div>
        <div class="slider-value" id="melody-value">45</div>
      </div>
    </div>

    <div class="divider"></div>

    <!-- Vocal Textures -->
    <div class="form-section">
      <label class="form-label">Vocal Textures</label>
      <div class="chip-group" id="vocal-chips"></div>
    </div>

    <!-- Attitude -->
    <div class="form-section">
      <label class="form-label">Attitude</label>
      <input type="text" class="text-input" id="attitude-input" placeholder="e.g. confident and unapologetic">
    </div>

    <!-- Ad-libs -->
    <div class="form-section">
      <label class="form-label">Ad-libs <span class="hint">press Enter to add</span></label>
      <div class="tag-input-wrapper" id="adlibs-wrapper">
        <input type="text" class="tag-input-field" id="adlibs-input" placeholder='e.g. "yeah", "skrrt"...'>
      </div>
    </div>
  </div>

  <!-- RIGHT: Live Output -->
  <div class="panel output-panel">
    <div class="panel-title">Live Output</div>

    <!-- Vocal Prompt -->
    <div class="output-box">
      <div class="output-header">
        <span class="output-label">Vocal Prompt</span>
        <div class="output-meta">
          <span class="char-count" id="vocal-count">0 chars</span>
          <button class="copy-btn" onclick="copyOutput('vocal')">Copy</button>
        </div>
      </div>
      <div class="output-text" id="vocal-output"></div>
    </div>

    <!-- Music Style Prompt -->
    <div class="output-box">
      <div class="output-header">
        <span class="output-label">Music Style Prompt</span>
        <div class="output-meta">
          <span class="char-count" id="music-count">0 chars</span>
          <button class="copy-btn" onclick="copyOutput('music')">Copy</button>
        </div>
      </div>
      <div class="output-text" id="music-output"></div>
    </div>

    <!-- Combined Prompt -->
    <div class="output-box">
      <div class="output-header">
        <span class="output-label">Combined Prompt</span>
        <div class="output-meta">
          <span class="char-count" id="combined-count">0 chars</span>
          <button class="copy-btn" onclick="copyOutput('combined')">Copy</button>
        </div>
      </div>
      <div class="output-text" id="combined-output"></div>
    </div>
  </div>
</div>

<script>
  // ── State ──
  const state = {
    genres: ['Hip-Hop/Rap'],
    subgenres: [],
    production: ['lo-fi', '808-heavy'],
    influences: ['Travis Scott'],
    melodyBias: 45,
    vocalTextures: ['raspy', 'deep'],
    attitude: 'confident and unapologetic',
    adlibs: ['yeah', 'skrrt'],
  };

  // ── Data ──
  const GENRES = [
    'Hip-Hop/Rap', 'Pop', 'R&B/Soul', 'Rock', 'Electronic/Dance',
    'Jazz', 'Country', 'Metal', 'Latino', 'Reggae/Caribbean'
  ];

  const PRODUCTION = [
    'lo-fi', 'minimalist', 'layered', '808-heavy',
    'orchestral', 'ambient', 'sample-heavy', 'live instruments'
  ];

  const VOCAL_TEXTURES = [
    'raspy', 'smooth', 'falsetto', 'deep',
    'breathy', 'gritty', 'nasal', 'powerful'
  ];

  const MAX_GENRES = 3;

  // ── Chip Renderer ──
  function renderChips(containerId, options, selected, onToggle, maxSelect) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    const atLimit = maxSelect && selected.length >= maxSelect;

    options.forEach(opt => {
      const chip = document.createElement('button');
      chip.type = 'button';
      chip.className = 'chip';
      chip.textContent = opt;

      const isActive = selected.includes(opt);
      if (isActive) chip.classList.add('active');
      if (!isActive && atLimit) chip.classList.add('disabled');

      chip.addEventListener('click', () => {
        if (!isActive && atLimit) return;
        onToggle(opt);
      });
      container.appendChild(chip);
    });
  }

  // ── Tag Renderer ──
  function renderTags(wrapperId, tags, inputId, onRemove) {
    const wrapper = document.getElementById(wrapperId);
    const input = document.getElementById(inputId);

    // Remove existing tags (keep the input)
    Array.from(wrapper.querySelectorAll('.tag')).forEach(t => t.remove());

    tags.forEach((tag, idx) => {
      const el = document.createElement('span');
      el.className = 'tag';
      el.innerHTML = `${escapeHtml(tag)}<span class="tag-remove" data-idx="${idx}">&times;</span>`;
      wrapper.insertBefore(el, input);
    });

    // Rebind remove handlers
    wrapper.querySelectorAll('.tag-remove').forEach(btn => {
      btn.addEventListener('click', (e) => {
        onRemove(parseInt(e.target.dataset.idx));
      });
    });
  }

  function escapeHtml(str) {
    const div = document.createElement('div');
    div.textContent = str;
    return div.innerHTML;
  }

  // ── Prompt Builders ──
  function buildVocalPrompt() {
    const parts = [];

    if (state.vocalTextures.length > 0) {
      parts.push(state.vocalTextures.join(', '));
    }

    const bias = state.melodyBias;
    if (bias <= 20) parts.push('spoken word delivery');
    else if (bias <= 40) parts.push('rap-focused with occasional melody');
    else if (bias <= 60) parts.push('balanced rap and singing');
    else if (bias <= 80) parts.push('melodic with spoken sections');
    else parts.push('fully sung vocals');

    if (state.attitude.trim()) {
      parts.push(state.attitude.trim() + ' tone');
    }

    if (state.adlibs.length > 0) {
      parts.push('ad-libs: ' + state.adlibs.slice(0, 3).join(', '));
    }

    return parts.join(', ');
  }

  function buildMusicPrompt() {
    const tags = [];
    tags.push(...state.genres.slice(0, 2));
    tags.push(...state.subgenres.slice(0, 2));
    tags.push(...state.production.slice(0, 2));

    if (state.influences.length > 0) {
      tags.push(state.influences[0] + ' influenced');
    }

    return tags.join(', ');
  }

  // ── Update Outputs ──
  function updateOutputs() {
    const vocal = buildVocalPrompt();
    const music = buildMusicPrompt();
    const combined = [vocal, music].filter(Boolean).join(', ');

    setOutput('vocal', vocal);
    setOutput('music', music);
    setOutput('combined', combined);
  }

  function setOutput(id, text) {
    const el = document.getElementById(id + '-output');
    const countEl = document.getElementById(id + '-count');

    if (text) {
      el.textContent = text;
      el.classList.remove('empty');
    } else {
      el.textContent = 'Start configuring inputs to generate a prompt...';
      el.classList.add('empty');
    }

    const len = text.length;
    countEl.textContent = len + ' chars';
    countEl.classList.toggle('warn', len > 200);
  }

  // ── Copy ──
  function copyOutput(id) {
    const el = document.getElementById(id + '-output');
    if (el.classList.contains('empty')) return;

    navigator.clipboard.writeText(el.textContent).then(() => {
      const btn = el.closest('.output-box').querySelector('.copy-btn');
      btn.textContent = 'Copied!';
      btn.classList.add('copied');
      setTimeout(() => {
        btn.textContent = 'Copy';
        btn.classList.remove('copied');
      }, 1500);
    });
  }

  // ── Initialize ──
  function init() {
    // Genre chips
    function renderGenres() {
      renderChips('genre-chips', GENRES, state.genres, (g) => {
        const idx = state.genres.indexOf(g);
        if (idx >= 0) state.genres.splice(idx, 1);
        else state.genres.push(g);
        renderGenres();
        updateOutputs();
      }, MAX_GENRES);

      const limitNote = document.getElementById('genre-limit');
      limitNote.textContent = `${state.genres.length} / ${MAX_GENRES} selected`;
      limitNote.classList.toggle('at-limit', state.genres.length >= MAX_GENRES);
    }
    renderGenres();

    // Production chips
    function renderProduction() {
      renderChips('production-chips', PRODUCTION, state.production, (p) => {
        const idx = state.production.indexOf(p);
        if (idx >= 0) state.production.splice(idx, 1);
        else state.production.push(p);
        renderProduction();
        updateOutputs();
      });
    }
    renderProduction();

    // Vocal texture chips
    function renderVocals() {
      renderChips('vocal-chips', VOCAL_TEXTURES, state.vocalTextures, (v) => {
        const idx = state.vocalTextures.indexOf(v);
        if (idx >= 0) state.vocalTextures.splice(idx, 1);
        else state.vocalTextures.push(v);
        renderVocals();
        updateOutputs();
      });
    }
    renderVocals();

    // Subgenre input
    const subgenreInput = document.getElementById('subgenre-input');
    subgenreInput.value = 'Trap, Melodic Trap';
    state.subgenres = ['Trap', 'Melodic Trap'];

    subgenreInput.addEventListener('input', () => {
      state.subgenres = subgenreInput.value
        .split(',')
        .map(s => s.trim())
        .filter(Boolean);
      updateOutputs();
    });

    // Influences tag input
    function renderInfluences() {
      renderTags('influences-wrapper', state.influences, 'influences-input', (idx) => {
        state.influences.splice(idx, 1);
        renderInfluences();
        updateOutputs();
      });
    }
    renderInfluences();

    const influencesInput = document.getElementById('influences-input');
    influencesInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        const val = influencesInput.value.trim();
        if (val && !state.influences.includes(val)) {
          state.influences.push(val);
          influencesInput.value = '';
          renderInfluences();
          updateOutputs();
        }
      }
      if (e.key === 'Backspace' && !influencesInput.value && state.influences.length > 0) {
        state.influences.pop();
        renderInfluences();
        updateOutputs();
      }
    });

    document.getElementById('influences-wrapper').addEventListener('click', () => {
      influencesInput.focus();
    });

    // Melody bias slider
    const melodySlider = document.getElementById('melody-slider');
    const melodyValue = document.getElementById('melody-value');

    melodySlider.addEventListener('input', () => {
      state.melodyBias = parseInt(melodySlider.value);
      melodyValue.textContent = melodySlider.value;
      updateOutputs();
    });

    // Attitude input
    const attitudeInput = document.getElementById('attitude-input');
    attitudeInput.value = state.attitude;

    attitudeInput.addEventListener('input', () => {
      state.attitude = attitudeInput.value;
      updateOutputs();
    });

    // Ad-libs tag input
    function renderAdlibs() {
      renderTags('adlibs-wrapper', state.adlibs, 'adlibs-input', (idx) => {
        state.adlibs.splice(idx, 1);
        renderAdlibs();
        updateOutputs();
      });
    }
    renderAdlibs();

    const adlibsInput = document.getElementById('adlibs-input');
    adlibsInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        e.preventDefault();
        const val = adlibsInput.value.trim();
        if (val && !state.adlibs.includes(val)) {
          state.adlibs.push(val);
          adlibsInput.value = '';
          renderAdlibs();
          updateOutputs();
        }
      }
      if (e.key === 'Backspace' && !adlibsInput.value && state.adlibs.length > 0) {
        state.adlibs.pop();
        renderAdlibs();
        updateOutputs();
      }
    });

    document.getElementById('adlibs-wrapper').addEventListener('click', () => {
      adlibsInput.focus();
    });

    // Initial output render
    updateOutputs();
  }

  document.addEventListener('DOMContentLoaded', init);
</script>

</body>
</html>
