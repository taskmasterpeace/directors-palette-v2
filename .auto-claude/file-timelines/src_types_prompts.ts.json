{
  "file_path": "src/types/prompts.ts",
  "main_branch_history": [],
  "task_views": {
    "014-user-prompts-organization-system": {
      "task_id": "014-user-prompts-organization-system",
      "branch_point": {
        "commit_hash": "8654231a22984c33942f63d8839bdca5b0d017c2",
        "content": "",
        "timestamp": "2025-12-25T18:57:09.097761"
      },
      "worktree_state": {
        "content": "/**\n * User Prompts Organization System Types\n * Types for prompt library, folders, tags, and search functionality\n */\n\n// =============================================================================\n// PROMPT FOLDER TYPES\n// =============================================================================\n\nexport interface PromptFolder {\n  id: string\n  userId: string\n  name: string\n  description: string | null\n  color: string | null\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface PromptFolderRow {\n  id: string\n  user_id: string\n  name: string\n  description: string | null\n  color: string | null\n  created_at: string\n  updated_at: string\n}\n\n// =============================================================================\n// USER PROMPT TYPES\n// =============================================================================\n\nexport interface UserPrompt {\n  id: string\n  userId: string\n  folderId: string | null\n  name: string\n  description: string | null\n  promptContent: string\n  tags: string[]\n  useCount: number\n  lastUsedAt: string | null\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface UserPromptRow {\n  id: string\n  user_id: string\n  folder_id: string | null\n  name: string\n  description: string | null\n  prompt_content: string\n  tags: string[]\n  use_count: number\n  last_used_at: string | null\n  created_at: string\n  updated_at: string\n}\n\n// Extended prompt with folder info for display\nexport interface UserPromptWithFolder extends UserPrompt {\n  folder: PromptFolder | null\n}\n\n// =============================================================================\n// PROMPT TAG TYPES\n// =============================================================================\n\nexport interface PromptTag {\n  id: string\n  userId: string\n  tagName: string\n  usageCount: number\n  createdAt: string\n  updatedAt: string\n}\n\nexport interface PromptTagRow {\n  id: string\n  user_id: string\n  tag_name: string\n  usage_count: number\n  created_at: string\n  updated_at: string\n}\n\n// =============================================================================\n// API REQUEST TYPES\n// =============================================================================\n\nexport type PromptSortField = 'name' | 'created_at' | 'updated_at' | 'use_count' | 'last_used_at'\n\nexport type SortDirection = 'asc' | 'desc'\n\nexport interface PromptFilters {\n  folderId?: string | null\n  tags?: string[]\n  search?: string\n}\n\nexport interface PromptListParams {\n  filters?: PromptFilters\n  sortBy?: PromptSortField\n  sortDirection?: SortDirection\n  limit?: number\n  offset?: number\n}\n\nexport interface CreatePromptRequest {\n  name: string\n  description?: string | null\n  promptContent: string\n  folderId?: string | null\n  tags?: string[]\n}\n\nexport interface UpdatePromptRequest {\n  name?: string\n  description?: string | null\n  promptContent?: string\n  folderId?: string | null\n  tags?: string[]\n}\n\nexport interface CreateFolderRequest {\n  name: string\n  description?: string | null\n  color?: string | null\n}\n\nexport interface UpdateFolderRequest {\n  name?: string\n  description?: string | null\n  color?: string | null\n}\n\n// =============================================================================\n// API RESPONSE TYPES\n// =============================================================================\n\nexport interface PromptListResponse {\n  prompts: UserPrompt[]\n  total: number\n  limit: number\n  offset: number\n}\n\nexport interface FolderListResponse {\n  folders: PromptFolder[]\n  total: number\n}\n\nexport interface TagListResponse {\n  tags: PromptTag[]\n  total: number\n}\n\nexport interface PromptApiError {\n  error: string\n  code?: string\n  details?: Record<string, string>\n}\n\n// =============================================================================\n// STORE STATE TYPES\n// =============================================================================\n\nexport interface PromptStoreState {\n  prompts: UserPrompt[]\n  folders: PromptFolder[]\n  tags: PromptTag[]\n  selectedFolderId: string | null\n  selectedTags: string[]\n  searchQuery: string\n  sortBy: PromptSortField\n  sortDirection: SortDirection\n  isLoading: boolean\n  error: string | null\n}\n\nexport interface PromptStoreActions {\n  // Prompt actions\n  fetchPrompts: () => Promise<void>\n  createPrompt: (data: CreatePromptRequest) => Promise<UserPrompt>\n  updatePrompt: (id: string, data: UpdatePromptRequest) => Promise<UserPrompt>\n  deletePrompt: (id: string) => Promise<void>\n  incrementUseCount: (id: string) => Promise<void>\n\n  // Folder actions\n  fetchFolders: () => Promise<void>\n  createFolder: (data: CreateFolderRequest) => Promise<PromptFolder>\n  updateFolder: (id: string, data: UpdateFolderRequest) => Promise<PromptFolder>\n  deleteFolder: (id: string) => Promise<void>\n\n  // Tag actions\n  fetchTags: () => Promise<void>\n\n  // Filter actions\n  setSelectedFolderId: (folderId: string | null) => void\n  setSelectedTags: (tags: string[]) => void\n  toggleTag: (tag: string) => void\n  setSearchQuery: (query: string) => void\n  setSortBy: (sortBy: PromptSortField) => void\n  setSortDirection: (direction: SortDirection) => void\n  clearFilters: () => void\n\n  // Utility\n  setError: (error: string | null) => void\n  reset: () => void\n}\n\nexport type PromptStore = PromptStoreState & PromptStoreActions\n\n// =============================================================================\n// CONSTANTS\n// =============================================================================\n\nexport const MAX_PROMPT_NAME_LENGTH = 100\nexport const MAX_PROMPT_DESCRIPTION_LENGTH = 500\nexport const MAX_PROMPT_CONTENT_LENGTH = 10000\nexport const MAX_TAG_LENGTH = 50\nexport const MAX_TAGS_PER_PROMPT = 10\nexport const MAX_FOLDER_NAME_LENGTH = 50\nexport const MAX_FOLDER_DESCRIPTION_LENGTH = 200\n\nexport const FOLDER_COLORS = [\n  { value: 'gray', label: 'Gray', hex: '#6B7280' },\n  { value: 'red', label: 'Red', hex: '#EF4444' },\n  { value: 'orange', label: 'Orange', hex: '#F97316' },\n  { value: 'amber', label: 'Amber', hex: '#F59E0B' },\n  { value: 'yellow', label: 'Yellow', hex: '#EAB308' },\n  { value: 'lime', label: 'Lime', hex: '#84CC16' },\n  { value: 'green', label: 'Green', hex: '#22C55E' },\n  { value: 'emerald', label: 'Emerald', hex: '#10B981' },\n  { value: 'teal', label: 'Teal', hex: '#14B8A6' },\n  { value: 'cyan', label: 'Cyan', hex: '#06B6D4' },\n  { value: 'sky', label: 'Sky', hex: '#0EA5E9' },\n  { value: 'blue', label: 'Blue', hex: '#3B82F6' },\n  { value: 'indigo', label: 'Indigo', hex: '#6366F1' },\n  { value: 'violet', label: 'Violet', hex: '#8B5CF6' },\n  { value: 'purple', label: 'Purple', hex: '#A855F7' },\n  { value: 'fuchsia', label: 'Fuchsia', hex: '#D946EF' },\n  { value: 'pink', label: 'Pink', hex: '#EC4899' },\n  { value: 'rose', label: 'Rose', hex: '#F43F5E' },\n] as const\n\nexport type FolderColor = (typeof FOLDER_COLORS)[number]['value']\n\n// =============================================================================\n// UTILITY TYPES\n// =============================================================================\n\n// Type for transforming database rows to frontend types\nexport type RowToType<T> = {\n  [K in keyof T as K extends `${infer Prefix}_${infer Suffix}`\n    ? `${Prefix}${Capitalize<Suffix>}`\n    : K]: T[K]\n}\n\n// Helper type for partial updates\nexport type PromptUpdate = Partial<Omit<UserPrompt, 'id' | 'userId' | 'createdAt' | 'updatedAt'>>\nexport type FolderUpdate = Partial<Omit<PromptFolder, 'id' | 'userId' | 'createdAt' | 'updatedAt'>>\n\n// =============================================================================\n// HELPER FUNCTIONS\n// =============================================================================\n\nexport function rowToPromptFolder(row: PromptFolderRow): PromptFolder {\n  return {\n    id: row.id,\n    userId: row.user_id,\n    name: row.name,\n    description: row.description,\n    color: row.color,\n    createdAt: row.created_at,\n    updatedAt: row.updated_at,\n  }\n}\n\nexport function rowToUserPrompt(row: UserPromptRow): UserPrompt {\n  return {\n    id: row.id,\n    userId: row.user_id,\n    folderId: row.folder_id,\n    name: row.name,\n    description: row.description,\n    promptContent: row.prompt_content,\n    tags: row.tags || [],\n    useCount: row.use_count,\n    lastUsedAt: row.last_used_at,\n    createdAt: row.created_at,\n    updatedAt: row.updated_at,\n  }\n}\n\nexport function rowToPromptTag(row: PromptTagRow): PromptTag {\n  return {\n    id: row.id,\n    userId: row.user_id,\n    tagName: row.tag_name,\n    usageCount: row.usage_count,\n    createdAt: row.created_at,\n    updatedAt: row.updated_at,\n  }\n}\n\n/**\n * Normalize a tag for storage (lowercase, trimmed)\n */\nexport function normalizeTag(tag: string): string {\n  return tag.toLowerCase().trim()\n}\n\n/**\n * Validate tag format\n */\nexport function isValidTag(tag: string): boolean {\n  const normalized = normalizeTag(tag)\n  return (\n    normalized.length > 0 &&\n    normalized.length <= MAX_TAG_LENGTH &&\n    !/[<>]/.test(normalized) // Prevent potential XSS in tag names\n  )\n}\n\n/**\n * Get folder color hex value from color name\n */\nexport function getFolderColorHex(colorName: string | null): string {\n  if (!colorName) return FOLDER_COLORS[0].hex // Default to gray\n  const color = FOLDER_COLORS.find((c) => c.value === colorName)\n  return color?.hex ?? FOLDER_COLORS[0].hex\n}\n",
        "last_modified": "2025-12-25T18:57:09.361571"
      },
      "task_intent": {
        "title": "014-user-prompts-organization-system",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2025-12-25T18:55:50.176454",
  "last_updated": "2025-12-25T18:57:09.277908"
}