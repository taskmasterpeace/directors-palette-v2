{
  "complexity": "standard",
  "workflow_type": "investigation",
  "confidence": 0.90,
  "reasoning": "This is a read-only investigation task to audit the storyboard feature. While the feature is extensive (50+ files across components, services, store, types, and tests), no code changes will be made. The task requires thorough exploration but has zero risk since it's audit-only.",

  "analysis": {
    "scope": {
      "estimated_files": 50,
      "estimated_services": 1,
      "is_cross_cutting": false,
      "notes": "Storyboard is a self-contained feature under src/features/storyboard/ with components, services, store, types, database migrations, and tests. All files need review but no modifications."
    },
    "integrations": {
      "external_services": ["OpenRouter (existing)", "Supabase (existing)"],
      "new_dependencies": [],
      "research_needed": false,
      "notes": "All integrations already exist in codebase. Audit will verify they work correctly, not add new ones."
    },
    "infrastructure": {
      "docker_changes": false,
      "database_changes": false,
      "config_changes": false,
      "notes": "No infrastructure changes - this is a read-only audit. Will examine existing Supabase migration for correctness."
    },
    "knowledge": {
      "patterns_exist": true,
      "research_required": false,
      "unfamiliar_tech": [],
      "notes": "All patterns exist in codebase. Investigation requires understanding existing implementation, not learning new technologies."
    },
    "risk": {
      "level": "low",
      "concerns": ["Audit may uncover significant issues requiring later fixes", "Need to establish baseline of 'intended' functionality"],
      "notes": "Zero implementation risk since no code changes. Main risk is incomplete audit coverage."
    }
  },

  "recommended_phases": [
    "discovery",
    "requirements",
    "context",
    "spec_writing",
    "planning",
    "validation"
  ],

  "flags": {
    "needs_research": false,
    "needs_self_critique": false,
    "needs_infrastructure_setup": false
  },

  "validation_recommendations": {
    "risk_level": "trivial",
    "skip_validation": true,
    "minimal_mode": true,
    "test_types_required": [],
    "security_scan_required": false,
    "staging_deployment_required": false,
    "reasoning": "This is a read-only audit task that produces documentation/report only. No code changes are made, so no testing or validation of code is needed. Validation is limited to ensuring the audit report is comprehensive."
  },

  "investigation_scope": {
    "components_to_audit": [
      "src/features/storyboard/components/Storyboard.tsx",
      "src/features/storyboard/components/ShotLab/",
      "src/features/storyboard/components/story-input/",
      "src/features/storyboard/components/shot-list/",
      "src/features/storyboard/components/gallery/",
      "src/features/storyboard/components/entities/",
      "src/features/storyboard/components/style-guides/",
      "src/features/storyboard/components/generation/",
      "src/features/storyboard/components/chapter-view/",
      "src/features/storyboard/components/contact-sheet/",
      "src/features/storyboard/components/broll/"
    ],
    "services_to_audit": [
      "src/features/storyboard/services/storyboard-generation.service.ts",
      "src/features/storyboard/services/story-director.service.ts",
      "src/features/storyboard/services/shot-breakdown.service.ts",
      "src/features/storyboard/services/shot-prompt.service.ts",
      "src/features/storyboard/services/openrouter.service.ts",
      "src/features/storyboard/services/character-sheet.service.ts",
      "src/features/storyboard/services/style-generator.service.ts",
      "src/features/storyboard/services/motion-director.service.ts",
      "src/features/storyboard/services/wildcard-integration.service.ts",
      "src/features/storyboard/services/chapter-detection.service.ts",
      "src/features/storyboard/services/name-replacement.service.ts",
      "src/features/storyboard/services/contact-sheet.service.ts"
    ],
    "state_to_audit": [
      "src/features/storyboard/store/storyboard.store.ts"
    ],
    "types_to_audit": [
      "src/features/storyboard/types/storyboard.types.ts"
    ],
    "database_to_audit": [
      "supabase/migrations/20251210000000_create_storyboard_schema.sql"
    ],
    "tests_to_audit": [
      "tests/storyboard.spec.ts",
      "tests/helpers/storyboard-test-data.ts"
    ]
  },

  "deliverable": {
    "type": "audit_report",
    "format": "structured issue inventory",
    "expected_output": "Comprehensive list of issues categorized by severity with remediation requirements"
  },

  "created_at": "2025-01-22T00:00:00.000Z"
}
