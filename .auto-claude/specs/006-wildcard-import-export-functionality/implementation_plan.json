{
  "feature": "Wildcard Import/Export Functionality",
  "description": "Add JSON import and export capabilities for wildcards, enabling users to backup their custom wildcards and share them with the community. Follows the same pattern as the existing usePromptImportExport.ts hook.",
  "created_at": "2025-12-25T07:58:59.205Z",
  "updated_at": "2025-12-25T08:10:34.275Z",
  "status": "human_review",
  "planStatus": "review",
  "workflow_type": "development",
  "spec_file": "spec.md",
  "phases": [
    {
      "id": "phase-1",
      "name": "Create Import/Export Hook",
      "description": "Create the useWildcardImportExport hook following the established pattern from usePromptImportExport.ts",
      "subtasks": [
        {
          "id": "1.1",
          "title": "Create useWildcardImportExport hook",
          "description": "Create src/features/shot-creator/hooks/useWildcardImportExport.ts following the pattern from usePromptImportExport.ts. Include:\n- WildcardExportData interface with version, exportDate, and wildcards array\n- exportWildcards function: strips user_id, creates JSON blob, triggers download with timestamp filename\n- importWildcards function: reads file, validates format, handles duplicates by name, provides toast feedback",
          "status": "completed",
          "completedNotes": "Created useWildcardImportExport.ts following exact pattern from usePromptImportExport.ts. TypeScript and ESLint checks pass.",
          "estimatedMinutes": 20,
          "dependencies": [],
          "files": [
            "src/features/shot-creator/hooks/useWildcardImportExport.ts"
          ],
          "acceptanceCriteria": [
            "Hook exports exportWildcards and importWildcards functions",
            "Export creates valid JSON file with version and date metadata",
            "Import validates file format and handles duplicates gracefully",
            "Toast notifications for success/failure states"
          ],
          "notes": "Hook created with exportWildcards and importWildcards functions. Follows pattern from usePromptImportExport.ts. ESLint passes, already committed.",
          "updated_at": "2025-12-25T08:13:27.706478+00:00"
        }
      ]
    },
    {
      "id": "phase-2",
      "name": "Integrate UI Controls",
      "description": "Add import/export buttons to the Wildcards sidebar UI",
      "subtasks": [
        {
          "id": "2.1",
          "title": "Add import/export buttons to WildcardSidebar",
          "description": "Update src/features/wildcards/components/WildcardSidebar.tsx to add import and export buttons in the header area. Include:\n- Download icon button for export\n- Upload icon button for import with hidden file input\n- Use lucide-react icons (Download, Upload)\n- Style consistently with existing 'New Wildcard' button",
          "status": "completed",
          "estimatedMinutes": 25,
          "dependencies": [
            "1.1"
          ],
          "files": [
            "src/features/wildcards/components/WildcardSidebar.tsx"
          ],
          "acceptanceCriteria": [
            "Export button visible in sidebar header",
            "Import button with file input for JSON files",
            "Buttons disabled when wildcards are loading",
            "Export disabled when no wildcards exist",
            "Consistent styling with existing UI"
          ],
          "notes": "Import/export buttons added to WildcardSidebar.tsx header. Export button with Download icon, Import button with Upload icon and hidden file input. Both buttons disabled when loading, export also disabled when no wildcards exist. TypeScript and ESLint checks pass. Committed as cb1a22f.",
          "updated_at": "2025-12-25T08:16:48.994088+00:00"
        }
      ]
    },
    {
      "id": "phase-3",
      "name": "Testing and Validation",
      "description": "Verify functionality works correctly end-to-end",
      "subtasks": [
        {
          "id": "3.1",
          "title": "TypeScript and lint check",
          "description": "Run TypeScript compiler and ESLint to ensure no errors in the new code",
          "status": "completed",
          "estimatedMinutes": 5,
          "dependencies": [
            "2.1"
          ],
          "files": [],
          "acceptanceCriteria": [
            "No TypeScript compilation errors",
            "No ESLint errors"
          ],
          "notes": "TypeScript and ESLint validation passed. No errors in new code (useWildcardImportExport.ts, WildcardSidebar.tsx). Pre-existing warnings in other files are unrelated to this feature.",
          "updated_at": "2025-12-25T08:20:03.346400+00:00"
        },
        {
          "id": "3.2",
          "title": "Verify export flow",
          "description": "Test that export creates valid JSON file with all wildcard data",
          "status": "completed",
          "estimatedMinutes": 10,
          "dependencies": [
            "3.1"
          ],
          "files": [],
          "acceptanceCriteria": [
            "Export creates downloadable JSON file",
            "JSON contains version, exportDate, and wildcards array",
            "Wildcards have name, category, content, description fields",
            "user_id is stripped from exported data"
          ],
          "notes": "Added comprehensive unit tests for wildcard export functionality. Tests verify: (1) Export data structure with version, exportDate, wildcards array, (2) All wildcard fields present (name, category, content, description), (3) user_id is stripped from exported data (security), (4) Valid JSON serialization with special characters. All 17 tests passing. Committed as 60293e6.",
          "updated_at": "2025-12-25T08:24:58.686119+00:00"
        },
        {
          "id": "3.3",
          "title": "Verify import flow",
          "description": "Test that import correctly adds wildcards and handles duplicates",
          "status": "completed",
          "estimatedMinutes": 10,
          "dependencies": [
            "3.1"
          ],
          "files": [],
          "acceptanceCriteria": [
            "Import accepts valid JSON files",
            "Duplicate wildcards (by name) are skipped",
            "Toast shows count of imported vs skipped",
            "Invalid files show error message"
          ],
          "notes": "Added comprehensive unit tests for wildcard import functionality. Tests verify: (1) Import accepts valid JSON files with proper structure, (2) Duplicate wildcards (by name) are skipped, (3) Toast messages show correct import/skip counts, (4) Invalid files (non-JSON, missing wildcards, malformed) trigger errors, (5) Validation for name patterns and empty content, (6) Edge cases for empty arrays, special characters, large files. All 43 tests passing (26 new import tests + 17 existing export tests). Committed as 1444af1.",
          "updated_at": "2025-12-25T08:29:49.464291+00:00"
        }
      ]
    }
  ],
  "totalEstimatedMinutes": 70,
  "keyFiles": {
    "pattern": "src/features/shot-creator/hooks/usePromptImportExport.ts",
    "wildcardStore": "src/features/shot-creator/store/wildcard.store.ts",
    "wildcardType": "src/features/shot-creator/helpers/wildcard/parser.ts",
    "wildcardSidebar": "src/features/wildcards/components/WildcardSidebar.tsx",
    "wildcardService": "src/features/shot-creator/services/wildcard.service.ts"
  },
  "technicalNotes": {
    "exportFormat": {
      "version": "1.0",
      "exportDate": "ISO 8601 timestamp",
      "wildcards": "Array of WildCard objects without user_id"
    },
    "duplicateDetection": "By wildcard name (same as existing createWildCard logic in store)",
    "fileNaming": "wildcards-{timestamp}.json",
    "validation": "Check for wildcards array and valid structure using existing validateWildCardName and validateWildCardContent from wildcard.service.ts"
  },
  "services_involved": [
    "wildcard.store.ts",
    "wildcard.service.ts"
  ],
  "final_acceptance": [
    "Export button downloads JSON file with all user wildcards",
    "Import button accepts JSON file and adds new wildcards",
    "Duplicate detection prevents overwriting existing wildcards",
    "User receives clear feedback via toast notifications"
  ],
  "qa": {
    "status": "pending",
    "tests_passed": "",
    "issues": ""
  },
  "recoveryNote": "Task recovered from stuck state at 2025-12-25T08:10:34.275Z",
  "last_updated": "2025-12-25T08:36:59.876603+00:00",
  "qa_signoff": {
    "status": "approved",
    "qa_session": 0,
    "issues_found": [
      {
        "description": "Minor: Test mock regex includes dashes but actual service does not - no functional impact"
      }
    ],
    "tests_passed": {},
    "timestamp": "2025-12-25T08:36:59.876588+00:00",
    "ready_for_qa_revalidation": false
  },
  "qa_iteration_history": [
    {
      "iteration": 1,
      "status": "approved",
      "timestamp": "2025-12-25T08:35:35.308621+00:00",
      "issues": [],
      "duration_seconds": 316.54
    },
    {
      "iteration": 1,
      "status": "approved",
      "timestamp": "2025-12-25T08:36:07.332375+00:00",
      "issues": [],
      "duration_seconds": 349.51
    },
    {
      "iteration": 1,
      "status": "approved",
      "timestamp": "2025-12-25T08:38:04.929164+00:00",
      "issues": [],
      "duration_seconds": 458.79
    }
  ],
  "qa_stats": {
    "total_iterations": 3,
    "last_iteration": 1,
    "last_status": "approved",
    "issues_by_type": {}
  }
}